.\" Automatically generated by Pandoc 1.16.0.2
.\"
.TH "rpmemd" "1" "" "" ""
.hy
.PP
NAME
.PP
SYNOPSIS
.PP
DESCRIPTION
.PP
OPTIONS
.PP
CONFIGURATION FILES
.PP
EXAMPLES
.PP
DEFAULT CONFIGURATION
.PP
PERSISTENCY METHODS
.PP
SEE ALSO
.SS NAME
.PP
\f[B]rpmemd\f[] âˆ’ librpmem target node process
.SS SYNOPSIS
.IP
.nf
\f[C]
rpmemd\ [\-\-help]\ [\-\-version]\ [<args>]
\f[]
.fi
.SS DESCRIPTION
.PP
The \f[B]rpmemd\f[] process is executed on target node by
\f[B]librpmem\f[] library over \f[B]ssh\f[](1) and facilitates access to
persistent memory over RDMA.
The \f[B]rpmemd\f[] should not be run manually under normal conditions.
.SS OPTIONS
.PP
Command line options overwrite the default \f[B]rpmemd\f[]
configuration, the global configuration file and the user configuration
file.
.TP
.B \f[C]\-V,\ \-\-version\f[]
Displays \f[B]rpmemd\f[] version and exits.
.RS
.RE
.TP
.B \f[C]\-h,\ \-\-help\f[]
Prints synopsis and list of parameters and exits.
.RS
.RE
.TP
.B \f[C]\-c,\ \-\-config\ <path>\f[]
Custom configuration file location.
If the custom configuration file is provided others are omitted.
See CONFIGURATION FILES section for details.
.RS
.RE
.PP
All options described in CONFIGURATION FILES
section are common for both the configuration file and the command line.
An equivalent of a following line in the config file:
\f[C]option\ =\ value\f[] is \f[C]\-\-option\ value\f[] in the command
line.
.PP
\f[C]\-\-persist\-apm\f[], \f[C]\-\-persist\-general\f[] and
\f[C]\-\-use\-syslog\f[] command line options should not be followed by
a value.
Presence of each of them in the command line turns on appropriate
option.
See CONFIGURATION FILES section for details.
.SS CONFIGURATION FILES
.PP
The \f[B]rpmemd\f[] searches for the configuration files with following
priorities:
.IP \[bu] 2
The global configuration file located in /etc/rpmemd/rpmemd.conf.
.IP \[bu] 2
The user configuration file located in the user home directory
($HOME/.rpmemd.conf).
.PP
The \f[B]rpmemd\f[] can also read configuration from the custom
configuration file provided using \f[C]\-\-config\f[] command line
option.
See OPTIONS section for details.
.PP
The default configuration is described in the DEFAULT
CONFIGURATION section.
.PP
The configuration file is a plain text file.
Each line of the configuration file can store only one configuration
option defined as a \f[C]key=value\f[] pair.
Empty lines and lines starting with \f[C]#\f[] are omitted.
.PP
The allowed options are:
.IP \[bu] 2
\f[C]log\-file\ =\ <path>\f[] \- log file location
.IP \[bu] 2
\f[C]poolset\-dir\ =\ <path>\f[] \- poolset files directory
.IP \[bu] 2
\f[C]persist\-apm\ =\ {yes|no}\f[] \- enable \f[B]The Appliance
Persistency Method\f[].
This option must be set only if the target platform has non\-allocating
writes IO enabled.
See PERSISTENCY METHODS section for details.
.IP \[bu] 2
\f[C]persist\-general\ =\ {yes|no}\f[] \- enable \f[B]The General
Purpose Server Persistency Method\f[].
See PERSISTENCY METHODS section for details.
.IP \[bu] 2
\f[C]use\-syslog\ =\ {yes|no}\f[] \- use syslog(3) for logging messages
instead of log file
.IP \[bu] 2
\f[C]log\-level\ =\ <level>\f[] \- set log level value.
Accepted \f[C]<level>\f[] values are:
.RS 2
.IP \[bu] 2
\f[C]err\f[] \- error conditions
.IP \[bu] 2
\f[C]warn\f[] \- warning conditions
.IP \[bu] 2
\f[C]notice\f[] \- normal, but significant, condition
.IP \[bu] 2
\f[C]info\f[] \- informational message
.IP \[bu] 2
\f[C]debug\f[] \- debug\-level message
.RE
.PP
The $HOME substring in the \f[C]poolset\-dir\f[] path is replaced with
the current user home directory.
.SS EXAMPLES
.PP
Example of the configuration file:
.IP
.nf
\f[C]
#\ This\ is\ an\ example\ of\ configuration\ file
log\-file\ =\ $HOME/.logs/rpmemd.log
poolset\-dir\ =\ $HOME/poolsets/
persist\-apm\ =\ yes
persist\-general\ =\ no
use\-syslog\ =\ no\ #\ Use\ log\ file\ instead\ of\ syslog
log\-level\ =\ info
\f[]
.fi
.SS DEFAULT CONFIGURATION
.PP
The \f[B]rpmemd\f[] default configuration is equivalent of the following
configuration file:
.IP
.nf
\f[C]
log\-file\ =\ /var/log/rpmemd.log
poolset\-dir\ =\ $HOME
persist\-apm\ =\ no
persist\-general\ =\ yes
use\-syslog\ =\ yes
log\-level\ =\ err
\f[]
.fi
.SS PERSISTENCY METHODS
.PP
The \f[B]librpmem\f[] supports two methods for making data written to
remote persistent memory durable.
The difference between the use of the two mechanisms is based on whether
\f[B]librpmem\f[] will make use of non\-allocating writes on the remote
node.
.IP \[bu] 2
\f[B]The General Purpose Server Persistency Method\f[] does not have any
requirements for the platform on which the target daemon runs and can be
enabled by administrator using the \f[C]persist\-general\f[] option.
This method utilize \f[B]libpmem(3)\f[] persistency mechanisms on remote
node and requires additional communication between initiator and remote
node using the in\-band connection.
.IP \[bu] 2
\f[B]The Appliance Persistency Method\f[] requires non\-allocating
writes enabled on the platform and can be enabled by administrator using
\f[C]persist\-apm\f[] option.
This method requires to issue an RDMA READ operation after the RDMA
WRITE operations performed on requested chunk of memory.
.PP
The Non\-allocating write requests is the Intel Integrated IO Controller
mode where all incoming PCIe Writes will utilize non\-allocating buffers
for the write requests.
Non\-allocating writes are guaranteed to bypass all of the CPU caches
and force the write requests to flow directly to the Integrated Memory
Controller without delay.
.SS SEE ALSO
.PP
\f[B]librpmem(3)\f[], \f[B]libpmem(3)\f[].
